<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Saved Recipes</title>
<%= csrf_meta_tags %>

<style>
  .modal {position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);opacity:0;pointer-events:none;display:flex;align-items:center;justify-content:center;}
  .modal:target {opacity:1;pointer-events:auto;}
  .recipe {display:block;margin-bottom:24px;}
</style>
</head>
<body style="font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;padding:16px;max-width:600px;margin:0 auto;">

<h1 style="text-align:center;margin-bottom:24px;">My Saved Recipes</h1>

<% if @saved_recipes.any? %>
  <% @saved_recipes.each_with_index do |recipe, i| %>
    <div id="recipe-<%= i %>" class="recipe">
      <div>
        <%= image_tag recipe.thumbnail, alt: recipe.name, style: "width:100%;height:auto;" %>
      </div>
      <h3><%= recipe.name %></h3>
      <div style="margin-bottom:8px;">
        <a href="#modal-<%= i %>" data-turbo="false" style="margin-right:8px;">View Description</a>
        <%= button_to "Remove", saved_recipe_path(recipe), method: :delete, form: { data: { turbo_confirm: "Remove this recipe?", turbo_method: :delete } } %>
      </div>
    </div>

    <div id="modal-<%= i %>" class="modal">
      <div style="background:white;padding:16px;max-width:600px;max-height:90vh;overflow:auto;position:relative;">
        <a href="#recipe-<%= i %>" data-turbo="false" style="position:absolute;top:8px;right:8px;text-decoration:none;font-size:1.25rem;line-height:1;">&times;</a>
        <h2><%= recipe.name %></h2>
        <%= image_tag recipe.thumbnail, alt: recipe.name, style: "width:100%;height:auto;margin-bottom:12px;" %>
        <p><strong>Category:</strong> <%= recipe.category.presence || "-" %></p>
        <p><strong>Area:</strong> <%= recipe.area.presence || "-" %></p>
        <h3>Description / Instructions</h3>
        <p style="white-space:pre-wrap;"><%= recipe.description.presence || "-" %></p>
      </div>
    </div>
  <% end %>
<% else %>
  <div style="text-align:center;padding:40px 20px;">No recipes saved yet.</div>
<% end %>

</body>
</html>
